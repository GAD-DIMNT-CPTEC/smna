! MFORMAT  Configurarion 
!------------------------------------------------------------------------------

!------------------------------------------------------------------------------!
! Tabela de descritores BUFR para extracao de variaveis da secao 4 e mapeamento!
!  em memoria                                                                  !
!                                                                              !
! Nota:                                                                        !
!                                                                              !
! a) Esta tabela relaciona os descritores que serao extraidos dos arquivos BUFR! 
!                                                                              !
! b) A sequencia identifica a coluna onde os valores sao armazenados           !  
!                                                                              !
! c) Um ou mais descritores podem ser calocados na mesma coluna.               ! 
!                                                                              !
!    Ex.:                                                                      !
!    005001         => Latitude de baixa resolucao                             !
!    005002         => Latitude de alta resolucao                              !
!   "005001,005002" => Determina que todas LATITUDES,idependente da resolucao, !
!                      sejam armazenadas na mesma coluna                       !
!                                                                              !
! d) Operacoes de multiplicacao (*) ou divisao ( ) podem vir seguidas ao des-  ! 
!    critor, a fim  de obter os valores nas unidades desejadas                 !
!                                                                              !
!    Ex.: "OO7004"       ==> Representa variavel de pressao em Pascal          !
!         "007004*0.001" ==> Converte o valor original da pressao para hPa     ! 
!------------------------------------------------------------------------------!

:bufrvar:
!-----------------------------------------
! Col   Descriptors 
! ---   ----------------------------------
 @Year,   004001                                  ! 01 Ano
 @Month,  004002                                  ! 02 mes
 @Day,    004003                                  ! 03 dia
 @Hour,   004004                                  ! 04 hora
 @Minute, 004005                                  ! 05 minuto
 @YOB,    005001,005002                           ! 06 Latitude baixa resolucao 
 @XOB,    006001,006002,006240                    ! 07 Longitude baixa resolucao 
 @LEVEL,  007004/100                              ! 08 Pressao Atmosfeirica (coordenada vertical) em hPa
 @PRES,   010004/100                              ! 09 Pressao Atmosferica (hPa)
 @HGTH,   010009,007002,007007,010003/9.8         ! 10 Altura geopotecial 
 @HAST,   007006                                  ! 11 Height above station
 @SELV,   007001,007030                           ! 12 007001-Height of station or 0007030 - Height of station ground above mean sea level 
 @WDIR,   011001,011011                           ! 13 Wind direction
 @WVEL,   011002,011012,011097                    ! 14 velocidade do vento / vento do altimetro JASON2
 @UWND,   011003                                  ! 15 U-COMPONENT  M/S 
 @VWND,   011004                                  ! 16 V-COMPONENT  M/S 
 @WCMP,   011006                                  ! 17 W-COMPONENT  M/S
!@Center, 020031                                  ! 18 centro gerador   
!@SAID,   001007                                  ! 19 SATELLITE IDENTIFIER (SATELLITE REPORTS ONLY)                      
!@SWCM,   002023                                  ! 20 Satellite-derived wind computation method                 
!@LSQL,   008012                                  ! 21 Land/sea qualifier   
 @PMSL,   010051*0.01                             ! 22 Pressao reduzida ao nivel medio do mar
!@TOST,   002001                                  ! 23 Type of station  
 @TMPK,   012001,012101,012004                    ! 24 Temperatura do ar (Kelvin)
 @DWPK,   012003,012103,012006,                   ! 25 Dew-point temperature
 @RH,     013003                                  ! Relative Humidth (%) 
 !@MIXR,  013002*1000,013003*1000                 ! Mixing ratio (G/KG)
 @TSMK,   022049                                  ! 27 SEA-SURFACE TEMPERATURE (K)
 @FLVLST, 007010                                  ! 28 Nivel de voo (m)
 @VSAT,   8003                                    !    Vertical Significance
 @WMOB,   1001                                    ! 30 BLOCK NUMBER
 @WMOS,   1002                                    ! 31 STATION NUMBER
!@WIGOS1, 001125                                  ! WIGOS Identifier: Identifier Series
!@WIGOS2, 001126                                  ! WIGOS Identifier: Issuer of Identifier
!@WIGOS3, 001127                                  ! WIGOS Identifier: Issue Number
!@WIGOS4, 001128                                  ! WIGOS Identifier: Local Identifier
 @VSIG,   008001&96,008042/2048&96,               ! VERTICAL SOUNDING SIGNIFICANCE
 @APCP,   013023                                  ! TOTAL PRECIPITATION PAST 24 HOURS (KG M-2)
!@TOPC,   013011                                  ! Total Precipitation/Total Wather Equivalente
!@POAF,   008004                                  ! PHASE OF AIRCRAFT FLIGHT (CODE TABLE 8004)  
!@KBSW,   022156                                  ! Ku band altura da onda
!@CBSW,   022171                                  ! C band altura da onda 
!@CLNE,   021064                                  ! Backscater (dB) 
!@RSST,   008029                                  ! Remotely-sensed surface type 
!@CLTP,   020012                                  ! CL
!@CMTP,   020012                                  ! CM
!@CHTP,   020012                                  ! ch
!@INCN,   002150                                  ! TOVS/ATOVS/AVHRR instrumentation channel number
!@FOVN,   005043                                  ! Field of view number 
!@SAZA,   007024                                  ! Satellite zenith angle
!@SOZA,   007025                                  ! Solar zenith angle
!@BEARAZ, 005021                                  ! Azimuth do satelite (Bearing or azimuth)
!@SOLAZI, 005022                                  ! Azimuth solar
!@TMBRST, 012063                                  ! Temperatura de brilho
!@SST1,   022043                                  ! Sea/water temperature (K)
!@SECO,   004006                                  ! Tempo em segundos
!@SCRA,   014046                                  ! SCALED IASI RADIANCE (WM-2SR-1M)
!@CHNM,   005042                                  ! 005042-CHANNEL NUMBER (NUMERIC) IASI

::
!--------------------------------------------------------------------------------------------------------
! List of BUFR Category accept as surface, upair and multi-levels 
!--------------------------------------------------------------------------------------------------------
!  Notes: 
!  a)The multi_level upair data, like vertical sounding, must be also include in upair_data_category 
!  b) If upair data has surface variables then it is also necessary include this dada as surface data. 
!     In this case, surface and upair variables are indicated in the colum klev in map_variables
! c) The descriptor that indicates the vertical level in upair data and multi-level data must be declared
!    in section "bufrvar" as @LEVEL. It necessary for the program localize the correspondent vertical level 
!     defined in the section "vertical levels"
!--------------------------------------------------------------------------------------------------------
:surface_data_category:
  000, !Surface data — land
  001, !Surface data — sea
  002, !Vertical soundings (other than satellite)
  004, !Single level upper-air data (other than satellite)
  005, !Single level upper-air data (satellite)
  012, !Surface data (satellite)
  031, !Oceanographic data
  109, !ADPSFC   SURFACE LAND (SYNOPTIC, METAR) REPORTS-                                                  
  110, !SFCSHP   SURFACE MARINE (SHIP, BUOY, C-MAN PLATFORM) REPORTS 
  118, !GPSIPW   GLOBAL POSITIONING SATE  LLITE-INTEGRATED PRECIP. WATER 
  121, !ASCATW   ASCAT SCATTEROMETER DATA (REPROCESSED)
::
:upair_data_category:
  002, !Vertical soundings (other than satellite)
  003, !Vertical soundings (satellite)
  004, !Single level upper-air data (other than satellite)
  005, !Single level upper-air data (satellite)
  102, !ADPUPA   UPPER-AIR (RAOB, PIBAL,RECCO, DROPS) REPORTS #    4) 000003-                                                  
  106, !PROFLR   WIND PROFILER REPORTS
::
!----------------------------------------------------------------------------
! Identifiers for next data line (vertical level)
!  TYPE, STYPE, BVAR ! Comments 
!  Use STYPE = * to indicates that any subcategory is valid 
!------------------------------------------------------------------------------  
:next_line_identifiers:
   002,   *, "DTIME", !Time Displacement
::

:output_categories:
!-------------------------
! BUFRTYPE, MNEUMONIC
! --------, --------------
     000,  ADPSFC, !109 !ADPSFC   SURFACE LAND (SYNOPTIC, METAR) REPORTS-                                                   
     001,  SFCSHP, !110 !SFCSHP   SURFACE MARINE (SHIP, BUOY, C-MAN PLATFORM) REPORTS
     031,  SFCSHP, !110 !SFCSHP   SURFACE MARINE (SHIP, BUOY, C-MAN PLATFORM) REPORTS
::
!----------------------------------------------------------
!Tabela BUFR do NCEP para codificacao de dados em PREPBUFR
!---------------------------------------------------------
:ncep_table:
  prepbufr.tables
::
!-------------------------------------------------------------------------------
! tabela de mapeamento que relaciona a seguencia de valores da secao 4 (&bufrvar) 
! com as variaveis meteorologicas que serao exportadas apos processamento
!
! klev = tipo de nivel vertical da variavel (0= nivel simples, 1=multiplos niveis /sondagem)
! cols = Coluna em :Bufrvar:
! BTYPE = Tipo/Categoria BUFR que esta associada a variavel (inicio e fim)
! LAYEAR = 1 Permite ou 2 = NAO permite  calculo de valor medio na camada isobarica quando
!          form processar saida em ponto de grade (formato grads)
!------------------------------------------------------------------------------- 
 :map_variables:
  
  !----------  ----    ------       --------  ------- ---------------------------------
  ! varcode     klev     Cols        BTYPE    Layer    Remarks
  ! ----------  ----   -----       --------  ------- ----------------------------------
    "U0       ",   0,   UWND,        0, 1,     0,      "Zonal wind                         (m/s)" 
    "V0       ",   0,   VWND,        0, 1,     0,      "Medidional Wind                    (m/s)" 
    "Pmsl     ",   0,   PMSL,        0, 1,     0,      "Mean Sea Level Pressure            (hPa)" 
    "P0       ",   0,   PRES,        0, 1,     0,      "Surface Pressure                   (hPa)"  
    "Q0       ",   0,   QOB,         0, 1,     0,      "Surface water vapor mixing ratio  (g/kg)"   
    "T0       ",   0,   TMPK,        0, 1,     0,      "Surface temperature                  (k)"
    "Td0      ",   0,   DWPK,        0, 1,     0,      "Surface Dew Point Temperature        (k)"
    "Iprec    ",   0,   TOPC,        0, 1,     0,      "Intensity_of_precipitation   (KG/M**2/s)"
    "Tsm      ",   0,   TSMK,        0, 1,     0,      "SEA-SURFACE TEMPERATURE              (K)"
:XDEF:
  100 LINEAR  -120  1
::
:YDEF:
72 LINEAR -60 1  
::

:vertical_levels:  
	1000,
::
:time:
	6, ! Time Window (hours)  time = central time +/- TW/2
	6, ! Time step (hours) 
        F, ! date and time of observation from BUFR section 1   (use T only for PREPBUFR / NCEP BUFR data and F for normal cases   
::
:processing type:
   !------------------------------------------------------------------------------------------------
   ! 0 - No processing (Output in text format ) 
   ! 1 - mean values in grid point (Output in grads format for gridpoint
   ! 2 - reduction of observational point to grid point (output in grads forat for statation points
   !------------------------------------------------------------------------------------------------
  1,   
::
  
 
:grib1_table2:
001, PRES, !Pressure Pa PRES
002, PMSL, !Pressure reduced to MSL Pa PRMSL
007, HGTH, !Geopotential height gpm HGT
011, TMPK, !Temperature K TMP
017, DWPK, !Dew point temperature K DPT
052, RH,   !Relative humidity % RH
053, MIXR, !Humidity mixing ratio kg/kg MIXR
061, APCP, !Total precipitation kg/m 2
031, WDIR, !Wind direction (from which blowing) 	deg true 	WDIR
032, WVEL, !Wind speed 	m/s 	WIND
033, UWND, !u-component of wind 	m/s 	UGRD
034, VWND, !v-component of wind 	m/s 	VGRD
180, GUST, !Surface wind gust
031, WDIR, !Wind direction (from which blowing)	deg true	
032, WVEL, !Wind speed
033, UWND, !u-component of wind	m/s	
034, VWND, !v-component of wind	m/s	
028, WVSP1,!Wave Spectra (1)	
029, WVSP2,!Wave Spectra (2)	
030, WVSP3,!Wave Spectra (3)	
::
:radiosonde:
 F,  !rspfull: print full radiosondes profiles in separeted file (drs)  
::
